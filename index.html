
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>LiveWire</title>
  <meta name="author" content="felegy">

  
  <meta name="description" content="A github-on van hozzá egy service wrapper
link, de a winX64 változat valahogy hiányzik, nekem az x86 sem ment, de az ES szerintem nagyon jó cucc és &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.livewire.hu/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="LiveWire" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">LiveWire</a></h1>
  
    <h2>VIGYÁZZ! FESZÜLTSÉG ALATT!</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.livewire.hu" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/04/elasticsearch-windows-service-windows-server-x64/">ElasticSearch Windows Service Windows Server X64</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-04T06:30:00+01:00" pubdate data-updated="true">2013.03.04 06:30</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A github-on van hozzá egy service wrapper
<a href="https://github.com/elasticsearch/elasticsearch-servicewrapper">link</a>, de a winX64 változat valahogy hiányzik, nekem az x86 sem ment, de az ES szerintem nagyon jó cucc és nyilván ha már van akkor fusson 64 biten. Tehát megidéztem régi tanítómesterem szellemét meg azt a kb. 12 éves tudásmorzsát, hogy csináltam én már ilyet … :-)
A legfrissebb verziót raktam össze <code>0.20.3</code>.</p>

<h2>Hozzávalók:</h2>

<ul>
<li>JDK 7 x64 <a href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-jdk-7-download-432154.html">link</a></li>
<li>Apache Commons <a href="http://xenia.sote.hu/ftp/mirrors/www.apache.org//commons/daemon/binaries/windows/commons-daemon-1.0.12-bin-windows.zip">link</a></li>
<li>JAVA_HOME rendszer környezeti változó <code>C:\Progra~1\Java\jdk1.7.0_11</code></li>
</ul>


<h2>Telepítés:</h2>

<ol>
<li>A letöltött <code>ES 0.20.3</code> -at kicsomagoljuk a <code>D:\\elasricsearch</code> alá (azért a oda mert a <code>C:\</code> alatt a <code>Program Files</code> -ba tenném, de ott minden féle jogosultsági bukfenc miatt nem megy)</li>
<li><code>D:\\elasricsearch\bin\elasricsearch.bat</code> elindításával le kell ellenőrizni, hogy megy-e. (ha nem akkor csak a JAVA_HOME-al lehet a bibi, pontosan úgy kell beállítani ahogyan írtam)</li>
<li><code>D:\\elasricsearch\service</code> alá kicsomagolni a <code>commons-daemon-1.0.12-bin-windows.zip</code> csomagot és az <code>amd64/prunsrv.exe</code> -vel felülírni a kintebbit (mert alapból az x86 van kint).</li>
<li>Át kell nevezni a file-okat, hogy a feladat kezelőben a host-olt nevet lássuk         <code>prunsvr.exe =&gt; ElasticSearch.exe</code> <code>prunmgr.exe =&gt; ElasticSearchw.exe</code> (ezt a nyolcvan hat nemműködő leírás egyikében láttam, de jó ötlet)</li>
<li>Kell csinálni egy <code>create-service.cmd</code> -t és a lenti kódot bele kell pakolni, majd futtatni kell a scriptet.</li>
</ol>


<figure class='code'><figcaption><span> (elasticsearch.cmd)</span> <a href='/downloads/code/elasticsearch.cmd'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bat'><span class='line'>ElasticSearch.exe <span class="n">//IS//ElasticSearch</span> --DisplayName<span class="o">=</span><span class="s2">&quot;ElasticSearch&quot;</span> --Description<span class="o">=</span><span class="s2">&quot;Distributed RESTful Full-Text Search Engine based on Lucene (http://www.elasticsearch.org/) --Install=D:elasticsearchserviceElasticSearch.exe --Classpath=&quot;</span>D:elasticsearchlibelasticsearch<span class="m">-0</span>.<span class="m">16</span>.<span class="m">0</span>.jar;D:elasticsearchlib*;D:elasticsearchlibsigar*<span class="s2">&quot; --Jvm=&quot;</span>C:Program FilesJavajre<span class="m">6</span>binserverjvm.dll<span class="s2">&quot; --JvmMx=512 --JvmOptions=&quot;</span>-Xms<span class="m">256</span>m;-Xmx<span class="m">1</span>g;-XX:+UseCompressedOops;-Xss<span class="m">128</span>k;-XX:+UseParNewGC;-XX:+UseConcMarkSweepGC;-XX:+CMSParallelRemarkEnabled;-XX:SurvivorRatio<span class="o">=</span><span class="m">8</span>;-XX:MaxTenuringThreshold<span class="o">=</span><span class="m">1</span>;-XX:CMSInitiatingOccupancyFraction<span class="o">=</span><span class="m">75</span>;-XX:+UseCMSInitiatingOccupancyOnly;-XX:+HeapDumpOnOutOfMemoryError;-Djline.enabled<span class="o">=</span>false;-Delasticsearch;-Des-foreground<span class="o">=</span>yes;-Des.path.home<span class="o">=</span>D:elasticsearch<span class="s2">&quot; --StartMode=jvm --StartClass=org.elasticsearch.bootstrap.Bootstrap --StartMethod=main --StartParams=&quot;&quot; --StopMode=jvm --StopClass=org.elasticsearch.bootstrap.Bootstrap --StopMethod=main --StdOutput=auto --StdError=auto --LogLevel=Debug --LogPath=&quot;</span>D:elasticsearchlogs<span class="s2">&quot; --LogPrefix=service --ServiceUser=&quot;</span>NT AUTHORITYNetworkService&quot; --Startup<span class="o">=</span>auto
</span></code></pre></td></tr></table></div></figure>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/03/04/elasticsearch-windows-service-windows-server-x64/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/03/net-build-szerver-jenkins-el/">Első Poszt: .NET Build Szerver Jenkins-el</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-03T13:03:00+01:00" pubdate data-updated="true">2013.03.03 13:03</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Első lépések</h2>

<ol>
<li>Először is kell egy Windows 7 alap rendszer, érdemes 64 biteset használni (én elsőre XP-re gondoltam, mert nLight-al lebutítva virtuális gépnek kiváló, csak nincs már hozzá <code>.NET 4.5</code> támogtás)</li>
<li>Telepíteni kell a <a href="http://go.microsoft.com/fwlink/?LinkID=145505">Web Platform insaller</a>-t és ezzel a <code>.NET 4.5</code>-t</li>
<li>Telepíteni kell a <code>Jenkins</code>-t (én az aktuális stabil verziót használom <a href="http://mirrors.jenkins-ci.org/windows-stable/latest">Jenkins windows stable latest</a>) a <code>C:\CI\Jenkins</code> mappába, lehet más meghajtóra is tenni, a lényeg, hogy ne legyen space és semmi speciális karakter az útvonalban, ezért nem jó a <code>Program Files</code> mappa.</li>
<li>Meg kell szerkeszteni a <code>Jenkins.xml</code> -t pl. <code>--httpPort=6080</code> így a 6080-as portot fogja használni</li>
<li>Fel kell venni egy local user-t, pl. <code>builder</code> és jelszót is be kell állítani neki és adjunk full jogot a <code>C:\CI\Jenkins</code> mappára.</li>
<li>Be kell állítani a service-ek között a <code>Jenkins</code>-t, hogy a fentebb létrehozott felhasználó nevében fusson</li>
<li>Indítsuk újra a service-t</li>
</ol>


<figure class='code'><figcaption><span>Jenkins config</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;service&gt;</span>
</span><span class='line'>  <span class="nt">&lt;id&gt;</span>jenkins<span class="nt">&lt;/id&gt;</span>
</span><span class='line'>  <span class="nt">&lt;name&gt;</span>Jenkins<span class="nt">&lt;/name&gt;</span>
</span><span class='line'>  <span class="nt">&lt;description&gt;</span>This service runs Jenkins continuous integration system.<span class="nt">&lt;/description&gt;</span>
</span><span class='line'>  <span class="nt">&lt;env</span> <span class="na">name=</span><span class="s">&quot;JENKINS_HOME&quot;</span> <span class="na">value=</span><span class="s">&quot;%BASE%&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="c">&lt;!--</span>
</span><span class='line'><span class="c">if you&#39;d like to run Jenkins with a specific version of Java, specify a full path to java.exe.</span>
</span><span class='line'><span class="c">The following value assumes that you have java in your PATH.</span>
</span><span class='line'><span class="c">  --&gt;</span>
</span><span class='line'>  <span class="nt">&lt;executable&gt;</span>%BASE%\jre\bin\java<span class="nt">&lt;/executable&gt;</span>
</span><span class='line'>  <span class="nt">&lt;arguments&gt;</span>-Xrs -Xmx256m -Dhudson.lifecycle=hudson.lifecycle.WindowsServiceLifecycle -jar &quot;%BASE%\jenkins.war&quot; --httpPort=6080<span class="nt">&lt;/arguments&gt;</span>
</span><span class='line'>  <span class="c">&lt;!--</span>
</span><span class='line'><span class="c">interactive flag causes the empty black Java window to be displayed.</span>
</span><span class='line'><span class="c">I&#39;m still debugging this.</span>
</span><span class='line'><span class="c">  &lt;interactive /&gt;</span>
</span><span class='line'><span class="c">  --&gt;</span>
</span><span class='line'>  <span class="nt">&lt;logmode&gt;</span>rotate<span class="nt">&lt;/logmode&gt;</span>
</span><span class='line'><span class="nt">&lt;/service&gt;</span>
</span></code></pre></td></tr></table></div></figure>


</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/03/03/net-build-szerver-jenkins-el/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
<section>
  <h1>About Me</h1>
  <div id="twitter-profile" style="margin-top:0.5em;">
    <p>
      <strong>felegy</strong> 
      (<a href="http://twitter.com/felegy">@felegy</a>)
    </p>
    <p></p>
  </div>
  <script type="text/javascript">
    $.domReady(function(){
        var container = $('#twitter-profile'),
            user = "felegy";
        
        function parseTwLinks(s) {
          var twUrl = "http://www.twitter.com/"
          s = s.replace(/ (@([\w]+))/g, function(match, p1, p2) {
              return " <a href='"+twUrl+p2+"'>"+p1+"</a>"
          }).replace(/ (#([\w]+))/g, function(match, p1, p2) {
              return " <a href='"+twUrl+"#!/search?q=%23"+p2+"'>"+p1+"</a>"
          })
          return s
        }

        $.ajax({
            url: "http://api.twitter.com/1/users/show.json?include_entities=false&screen_name="+user+"&callback=?"
          , type: 'jsonp'
          , error: function (err) { $('#twitter-profile').addClass('error');  }
          , success: function(data) {
              container.html('<img class="left" src="http://api.twitter.com/1/users/profile_image/'+user+'.json?size=bigger" alt="@'+user+'"><p><strong>'+data.name+'</strong> (<a href="http://twitter.com/'+user+'">@'+user+'</a>)<br/>'+data.location+'</p><p>'+parseTwLinks(data.description)+'</p>');
            }
        })
      });
  </script>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/03/04/elasticsearch-windows-service-windows-server-x64/">ElasticSearch Windows Service Windows Server x64</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/03/net-build-szerver-jenkins-el/">Első poszt: .NET build szerver Jenkins-el</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("felegy", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/felegy" class="twitter-follow-button" data-show-count="false">Follow @felegy</a>
  
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/106466389759361080156?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - felegy -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
